
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../slurm_overview/">
      
      
        <link rel="next" href="../monitor_jobs/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.14">
    
    
      
        <title>Example Scripts - Lawrencium Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.fad675c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#example-set-1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Lawrencium Documentation" class="md-header__button md-logo" aria-label="Lawrencium Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Lawrencium Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Example Scripts
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Lawrencium Documentation" class="md-nav__button md-logo" aria-label="Lawrencium Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Lawrencium Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Account
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Account
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../accounts/mylrc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting an Account
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../accounts/loggingin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging in
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../accounts/policies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Policies
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Running Jobs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Running Jobs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../slurm_overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Slurm Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Example Scripts
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Example Scripts
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#example-set-1" class="md-nav__link">
    <span class="md-ellipsis">
      Example Set 1
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-set-2" class="md-nav__link">
    <span class="md-ellipsis">
      Example Set 2
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gpu-job" class="md-nav__link">
    <span class="md-ellipsis">
      GPU Job
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../monitor_jobs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitor Jobs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gnu_parallel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GNU Parallel
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Data Transfer
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Data Transfer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datatransfer/datatransfer_node/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Transfer Node
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datatransfer/globus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Globus for Lawrencium
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Software
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Software
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/software-module-farm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Software Module Farm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/module-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Module Management
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/jupyter_gpu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using GPU on Jupyter
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faqs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Frequently Asked Questions
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#example-set-1" class="md-nav__link">
    <span class="md-ellipsis">
      Example Set 1
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-set-2" class="md-nav__link">
    <span class="md-ellipsis">
      Example Set 2
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gpu-job" class="md-nav__link">
    <span class="md-ellipsis">
      GPU Job
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Example Scripts</h1>

<h2 id="example-set-1">Example Set 1</h2>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Simple Serial Job</label><label for="__tabbed_1_2">Simple Multi-Core Job</label><label for="__tabbed_1_3">Serial Tasks in Parallel Job</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --job-name=test</span>
<span class="c1">#SBATCH --partition=partition_name</span>
<span class="c1">#SBATCH --account=account_name</span>
<span class="c1">#SBATCH --time=0:0:30</span>
<span class="c1">## Run command</span>
./a.out
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --job-name=test</span>
<span class="c1">#SBATCH --account=account_name</span>
<span class="c1">#SBATCH --partition=partition_name</span>
<span class="c1">#SBATCH --nodes=1</span>
<span class="c1">#SBATCH --ntasks-per-node=20</span>
<span class="c1">#SBATCH --cpus-per-task=1</span>
<span class="c1">#</span>
<span class="c1"># Wall clock limit:</span>
<span class="c1">#SBATCH --time=00:00:30</span>
<span class="c1">#</span>
<span class="c1">## Command(s) to run (example):</span>
./a.out
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --job-name=job-name</span>
<span class="c1">#SBATCH --account=account_name</span>
<span class="c1">#SBATCH --partition=partition_name</span>
<span class="c1">#SBATCH --nodes=2</span>
<span class="c1">#SBATCH --cpus-per-task=2</span>
<span class="c1">#SBATCH --time=2:00:00</span>
<span class="c1">#</span>
<span class="c1">## Command(s) to run (example):</span>
module<span class="w"> </span>load<span class="w"> </span>bio/blast/2.6.0
module<span class="w"> </span>load<span class="w"> </span>gnu-parallel/2019.03.22

<span class="nb">export</span><span class="w"> </span><span class="nv">WDIR</span><span class="o">=</span>/your/desired/path
<span class="nb">cd</span><span class="w"> </span><span class="nv">$WDIR</span>

<span class="c1"># set number of jobs based on number of cores available and number of threads per job</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">JOBS_PER_NODE</span><span class="o">=</span><span class="k">$((</span><span class="w"> </span><span class="nv">$SLURM_CPUS_ON_NODE</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nv">$SLURM_CPUS_PER_TASK</span><span class="w"> </span><span class="k">))</span>
<span class="c1">#</span>
<span class="nb">echo</span><span class="w"> </span><span class="nv">$SLURM_JOB_NODELIST</span><span class="w"> </span><span class="p">|</span>sed<span class="w"> </span>s/<span class="se">\,</span>/<span class="se">\\</span>n/g<span class="w"> </span>&gt;<span class="w"> </span>hostfile
<span class="c1">#</span>
parallel<span class="w"> </span>--jobs<span class="w"> </span><span class="nv">$JOBS_PER_NODE</span><span class="w"> </span>--slf<span class="w"> </span>hostfile<span class="w"> </span>--wd<span class="w"> </span><span class="nv">$WDIR</span><span class="w"> </span>--joblog<span class="w"> </span>task.log<span class="w"> </span>--resume<span class="w"> </span>--progress<span class="w"> </span>-a<span class="w"> </span>task.lst<span class="w"> </span>sh<span class="w"> </span>run-blast.sh<span class="w"> </span><span class="o">{}</span><span class="w"> </span>output/<span class="o">{</span>/.<span class="o">}</span>.blst<span class="w"> </span><span class="nv">$SLURM_CPUS_PER_TASK</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="example-set-2">Example Set 2</h2>
<div class="tabbed-set tabbed-alternate" data-tabs="2:4"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><input id="__tabbed_2_4" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Threaded/OpenMP Job</label><label for="__tabbed_2_2">MPI Job 1</label><label for="__tabbed_2_3">MPI Job 2</label><label for="__tabbed_2_4">Hybrid OpenMP+MPI Job</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --job-name=test</span>
<span class="c1">#SBATCH --account=account_name</span>
<span class="c1">#SBATCH --partition=partition_name</span>
<span class="c1">#SBATCH --nodes=1</span>
<span class="c1">#SBATCH --ntasks-per-node=1</span>
<span class="c1">#SBATCH --cpus-per-task=4</span>
<span class="c1">#</span>
<span class="c1">#SBATCH --time=00:00:30</span>
<span class="c1">## Command(s) to run (example):</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">OMP_NUM_THREADS</span><span class="o">=</span><span class="nv">$SLURM_CPUS_PER_TASK</span>
./a.out
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --job-name=test</span>
<span class="c1">#SBATCH --account=account_name</span>
<span class="c1">#SBATCH --partition=partition_name</span>
<span class="c1">#SBATCH --ntasks=40     (1)</span>
<span class="c1">#</span>
<span class="c1"># Processors per task:</span>
<span class="c1">#SBATCH --cpus-per-task=1</span>
<span class="c1">#SBATCH --time=00:00:30</span>
<span class="c1">#</span>
<span class="c1">## Command(s) to run (example):</span>
module<span class="w"> </span>load<span class="w"> </span>gcc<span class="w"> </span>openmpi
mpirun<span class="w"> </span>./a.out
</code></pre></div>
<ol>
<li>Number of MPI tasks needed</li>
</ol>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --job-name=test</span>
<span class="c1">#SBATCH --account=account_name</span>
<span class="c1">#SBATCH --partition=partition_name</span>
<span class="c1">#SBATCH --nodes=2</span>
<span class="c1">#SBATCH --ntasks-per-node=20</span>
<span class="c1">#SBATCH --cpus-per-task=1</span>
<span class="c1">#SBATCH --time=00:00:30</span>
<span class="c1">#</span>
<span class="c1">## Command(s) to run (example):</span>
module<span class="w"> </span>load<span class="w"> </span>gcc<span class="w"> </span>openmpi
mpirun<span class="w"> </span>./a.out
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --job-name=test</span>
<span class="c1">#SBATCH --account=account_name</span>
<span class="c1">#SBATCH --partition=partition_name</span>
<span class="c1">#SBATCH --nodes=2</span>
<span class="c1">#SBATCH --ntasks-per-node=4</span>
<span class="c1">#SBATCH --cpus-per-task=5    (1)</span>
<span class="c1">#SBATCH --time=00:00:30      (2)</span>
<span class="c1">#</span>
<span class="c1">## Command(s) to run (example):</span>
module<span class="w"> </span>load<span class="w"> </span>gcc<span class="w"> </span>openmpi
<span class="nb">export</span><span class="w"> </span><span class="nv">OMP_NUM_THREADS</span><span class="o">=</span><span class="nv">$SLURM_CPUS_PER_TASK</span>
mpirun<span class="w"> </span>./a.out
</code></pre></div>
<ol>
<li>Processors per task needed</li>
<li>Wall clock limit</li>
</ol>
</div>
</div>
</div>
<h2 id="gpu-job">GPU Job</h2>
<p>Es1 partition consists of GPU nodes with three generations of NVIDIA GPU cards(V100, GTX 2080TI, A40). Please take a look at the details on this page. A compute node with different GPU types and numbers can be allocated using slurm in the following way.</p>
<ul>
<li>
<p>General format:  <code>--gres=gpu[type]:count</code></p>
</li>
<li>
<p>The above format can schedule jobs on nodes with V100, GTX 2080TI, or A40 GPU cards. To specify a particular card:</p>
<ul>
<li>
<p>GRTX2080TI: <code>--gres=gpu:GRTX2080TI:1</code> (up to 3 or 4 GPUs)</p>
</li>
<li>
<p>V100 : <code>--gres=gpu:V100:1</code>(up to 2 GPUs)</p>
</li>
<li>
<p>A40: <code>--gres=gpu:A40:1</code> (up to 4 GPUs)</p>
</li>
</ul>
</li>
</ul>
<p>To help the job scheduler effectively manage the use of GPUs, your job submission script must request multiple CPUs (usually two) for each GPU you use. The scheduler will reject jobs submitted that do not request sufficient CPUs for every GPU. This ratio should be one:two.</p>
<p>Here’s how to request two CPUs for each GPU: the total of CPUs requested results from multiplying two settings: the number of tasks (<code>--ntasks=</code>) and CPUs per task (<code>--cpus-per-task=</code>).</p>
<p>For instance, in the above example, one GPU was requested via <code>--gres=gpu:1</code>, and the required total of two CPUs was thus requested via the combination of <code>--ntasks=1</code> and --cpus-per-task=2 . Similarly, if your job script requests four GPUs via <code>--gres=gpu:4</code>, and uses <code>--ntasks=8</code>, it should also include <code>--cpus-per-task=1</code> to request the required total of eight CPUs.</p>
<p>Note that in the <code>--gres=gpu:n</code> specification, <code>n</code> must be between 1 and the number of GPUs on a single node (which is provided here for the various GPU types). This is because the feature is associated with how many GPUs per node to request.</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --job-name=test</span>
<span class="c1">#SBATCH --account=account_name</span>
<span class="c1">#SBATCH --partition=es1</span>
<span class="c1">#SBATCH --nodes=1</span>
<span class="c1">#SBATCH --ntasks=1</span>
<span class="c1">#</span>
<span class="c1"># Processors per task (please always specify the total number of processors twice the number of GPUs):</span>
<span class="c1">#SBATCH --cpus-per-task=2</span>
<span class="c1">#</span>
<span class="c1">#Number of GPUs, this can be in the format of &quot;gpu:[1-4]&quot;, or &quot;gpu:V100:[1-4] with the type included</span>
<span class="c1">#SBATCH --gres=gpu:1</span>
<span class="c1">#</span>
<span class="c1"># Wall clock limit:</span>
<span class="c1">#SBATCH --time=1:00:00</span>
<span class="c1">#</span>
<span class="c1">## Command(s) to run (example):</span>
./a.out
</code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "search.highlight"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.cd18aaf1.min.js"></script>
      
    
  </body>
</html>